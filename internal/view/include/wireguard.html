{{ define "content" }}
<div>
    <form action="/wireguard" method="POST" class="config-form" enctype="multipart/form-data" data-turbo-frame="mikrotikScript">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" value="{{ .formData.Name }}" required>
            {{ if .formData.Errors.name }}
                <span class="error">{{ .formData.Errors.name }}</span>
            {{ end }}
        </div>
        <div class="form-group">
            <label for="configFile">WireGuard Configuration File:</label>
            <input type="file" id="configFile" name="configFile" accept=".conf" required>
            {{ if .formData.Errors.configFile }}
                <span class="error">{{ .formData.Errors.configFile }}</span>
            {{ end }}
        </div>
        <div class="form-group">
            <label for="listenPort">Listen Port:</label>
            <input type="number" id="listenPort" name="listenPort" value="{{ .formData.ListenPort }}" required>
            {{ if .formData.Errors.listenPort }}
                <span class="error">{{ .formData.Errors.listenPort }}</span>
            {{ end }}
        </div>
        <div class="form-group">
            <label for="mtu">MTU:</label>
            <input type="number" id="mtu" name="mtu" value="{{ .formData.MTU }}" required>
            {{ if .formData.Errors.mtu }}
                <span class="error">{{ .formData.Errors.mtu }}</span>
            {{ end }}
        </div>
        <div class="form-group">
            <label for="configType">Configuration Type:</label>
            <select id="configType" name="configType" required>
                <option value="Routing rule" {{ if eq .formData.ConfigType "Routing rule" }}selected{{ end }}>Routing rule</option>
                <option value="Mangle" {{ if eq .formData.ConfigType "Mangle" }}selected{{ end }}>Mangle</option>
            </select>
            {{ if .formData.Errors.configType }}
                <span class="error">{{ .formData.Errors.configType }}</span>
            {{ end }}
        </div>
        <button type="submit" class="submit-btn">Generate Script</button>
    </form>
    <turbo-frame id="mikrotikScript">
      {{ if .mikrotikScript }}
      <div class="output-container">
          <h2>Generated Script:</h2>
          <textarea id="scriptOutput" readonly>{{ .mikrotikScript }}</textarea>
          <button id="copyButton" onclick="copyScript()" class="copy-btn">Copy to Clipboard</button>
      </div>
      <script>
          function copyScript() {
              var scriptOutput = document.getElementById('scriptOutput');
              scriptOutput.select();
              document.execCommand('copy');
              alert('Script copied to clipboard!');
          }
      </script>
      {{ end }}
    </turbo-frame>
</div>
{{ end }}
