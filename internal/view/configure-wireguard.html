<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure WireGuard - Mikrotik Script Generator</title>
    <link rel="stylesheet" href="/public/css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Configure WireGuard</h1>
            <a href="/" class="back-link">‚Üê Back to Home</a>
        </header>
        <main>
            <form action="/configure-wireguard" method="POST" class="config-form" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" value="{{ .formData.Name }}" required>
                    {{ if .formData.Errors.name }}
                        <span class="error">{{ .formData.Errors.name }}</span>
                    {{ end }}
                </div>
                <div class="form-group">
                    <label for="configFile">WireGuard Configuration File:</label>
                    <input type="file" id="configFile" name="configFile" accept=".conf" required>
                    {{ if .formData.Errors.configFile }}
                        <span class="error">{{ .formData.Errors.configFile }}</span>
                    {{ end }}
                </div>
                <div class="form-group">
                    <label for="listenPort">Listen Port:</label>
                    <input type="number" id="listenPort" name="listenPort" value="{{ .formData.ListenPort }}" required>
                    {{ if .formData.Errors.listenPort }}
                        <span class="error">{{ .formData.Errors.listenPort }}</span>
                    {{ end }}
                </div>
                <div class="form-group">
                    <label for="mtu">MTU:</label>
                    <input type="number" id="mtu" name="mtu" value="{{ .formData.MTU }}" required>
                    {{ if .formData.Errors.mtu }}
                        <span class="error">{{ .formData.Errors.mtu }}</span>
                    {{ end }}
                </div>
                <div class="form-group">
                    <label for="configType">Configuration Type:</label>
                    <select id="configType" name="configType" required>
                        <option value="Routing rule" {{ if eq .formData.ConfigType "Routing rule" }}selected{{ end }}>Routing rule</option>
                        <option value="Mangle" {{ if eq .formData.ConfigType "Mangle" }}selected{{ end }}>Mangle</option>
                    </select>
                    {{ if .formData.Errors.configType }}
                        <span class="error">{{ .formData.Errors.configType }}</span>
                    {{ end }}
                </div>
                <button type="submit" class="submit-btn">Generate Script</button>
            </form>
            {{ if .generatedScript }}
            <div class="output-container">
                <h2>Generated Script:</h2>
                <textarea id="scriptOutput" readonly>{{ .generatedScript }}</textarea>
                <button id="copyButton" onclick="copyScript()" class="copy-btn">Copy to Clipboard</button>
            </div>
            <script>
                function copyScript() {
                    var scriptOutput = document.getElementById('scriptOutput');
                    scriptOutput.select();
                    document.execCommand('copy');
                    alert('Script copied to clipboard!');
                }
            </script>
            {{ end }}
        </main>
        <footer>
            <p>&copy; 2023 Mikrotik Script Generator. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>
